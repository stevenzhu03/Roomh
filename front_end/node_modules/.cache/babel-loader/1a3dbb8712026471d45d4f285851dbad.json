{"ast":null,"code":"import history from '../history'; // Sign Up\n\nexport const createUser = formValues => dispatch => {\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({\n      username: formValues.username,\n      password: formValues.password,\n      email: formValues.email\n    })\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors);\n    } else {\n      dispatch({\n        type: \"SET_CURRENT_USER\",\n        payload: response\n      });\n      localStorage.token = response.token;\n      history.push('/findroomate');\n    }\n  });\n}; //Log In\n\nexport const login = formValues => dispatch => {\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({\n      username: formValues.username,\n      password: formValues.password\n    })\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors);\n    } else {\n      dispatch({\n        type: \"SET_CURRENT_USER\",\n        payload: response\n      });\n      localStorage.token = response.token;\n      history.push('/findroomate');\n    }\n  });\n}; //Auto Login\n\nexport const autoLogin = token => dispatch => {\n  fetch(\"http://localhost:3000/auto_login\", {\n    headers: {\n      \"Authorization\": token\n    }\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors);\n      history.push('/');\n    } else {\n      dispatch({\n        type: \"AUTO_LOGIN\",\n        payload: response\n      });\n    }\n  });\n};\nexport const fetchUsers = () => dispatch => {\n  fetch('http://localhost:3000/users').then(resp => resp.json()).then(users => {\n    // returns an array of all users\n    // console.log(currentUser.id)\n    let filteredUsers = users.filter(user => user.id !== 1); // console.log(filteredUsers) \n\n    dispatch({\n      type: \"FETCH_USERS\",\n      payload: filteredUsers\n    });\n  });\n};\nexport const logOut = () => dispatch => {\n  dispatch({\n    type: \"LOG_OUT\",\n    payload: null\n  });\n  localStorage.removeItem(\"token\");\n  history.push(`/login`);\n};\nexport const setSelectedUser = selectedUser => dispatch => {\n  dispatch({\n    type: \"SET_SELECTED_USER\",\n    payload: selectedUser\n  });\n  history.push(`/matcher_profile`);\n};","map":{"version":3,"sources":["/Users/stevenzhu/Development/code/Flatiron School Final Projects/Roomh/front_end/src/actions/index.js"],"names":["history","createUser","formValues","dispatch","fetch","method","headers","body","JSON","stringify","username","password","email","then","resp","json","response","errors","alert","type","payload","localStorage","token","push","login","autoLogin","fetchUsers","users","filteredUsers","filter","user","id","logOut","removeItem","setSelectedUser","selectedUser"],"mappings":"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","sourcesContent":["import history from '../history'\n\n\n// Sign Up\n\nexport const createUser = (formValues) => dispatch => {\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({\n          username: formValues.username,\n          password: formValues.password,\n          email: formValues.email\n        })\n      })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.errors) {\n          alert(response.errors)\n        } else {\n          dispatch({type: \"SET_CURRENT_USER\", payload: response})\n            localStorage.token = response.token\n            history.push('/findroomate')\n        }\n    })\n    \n} \n\n//Log In\n\nexport const login = (formValues) => dispatch => {\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          username: formValues.username,\n          password: formValues.password,\n        })\n      })\n        .then(resp => resp.json())\n        .then(response => {\n            if (response.errors){\n              alert(response.errors)\n            } else {\n              dispatch({type: \"SET_CURRENT_USER\", payload: response})\n              localStorage.token = response.token\n              history.push('/findroomate')\n            }\n        })\n      }\n\n//Auto Login\n\nexport const autoLogin = (token) => dispatch => {\n    fetch(\"http://localhost:3000/auto_login\", {\n      headers: {\n        \"Authorization\": token\n        }\n      })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.errors){\n          alert(response.errors)\n          history.push('/')\n        } else {\n          dispatch({type: \"AUTO_LOGIN\", payload: response})\n        }\n      })\n    }\n    \n    export const fetchUsers = () => dispatch => {\n        fetch('http://localhost:3000/users')\n        .then(resp => resp.json())\n        .then(users => {\n            // returns an array of all users\n            // console.log(currentUser.id)\n            let filteredUsers = users.filter(user => user.id !== 1) \n            // console.log(filteredUsers) \n            dispatch({type: \"FETCH_USERS\", payload: filteredUsers})\n        })\n    }\n    \n    export const logOut = () => dispatch => {\n      dispatch({type: \"LOG_OUT\", payload: null})\n      localStorage.removeItem(\"token\")\n      history.push(`/login`)\n    }\n    \n    export const setSelectedUser = selectedUser => dispatch => {\n      dispatch({type: \"SET_SELECTED_USER\", payload: selectedUser}) \n  history.push(`/matcher_profile`)\n}"]},"metadata":{},"sourceType":"module"}