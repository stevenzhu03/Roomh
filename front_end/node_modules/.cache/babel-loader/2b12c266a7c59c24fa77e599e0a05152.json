{"ast":null,"code":"import history from '../history';\nexport const fetchUsers = () => dispatch => {\n  fetch('https://jsonplaceholder.typicode.com/users').then(resp => resp.json()).then(users => {\n    dispatch({\n      type: \"FETCH_USERS\",\n      payload: users\n    });\n  });\n};\nexport const createUser = formValues => dispatch => {\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({\n      username: formValues.username,\n      password: formValues.password,\n      email: formValues.email\n    })\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors);\n    } else {\n      dispatch({\n        type: \"SET_CURRENT_USER\",\n        payload: response\n      });\n      localStorage.token = response.token;\n    }\n  });\n};\nexport const login = formValues => dispatch => {\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    },\n    body: JSON.stringify({\n      username: formValues.username,\n      password: formValues.password\n    })\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors);\n    } else {\n      dispatch({\n        type: \"LOG_IN\",\n        payload: response\n      });\n      localStorage.token = response.token;\n    }\n  });\n};\nexport const autoLogin = token => dispatch => {\n  fetch(\"http://localhost:3000/auto_login\", {\n    headers: {\n      \"Authorization\": token\n    }\n  }).then(resp => resp.json()).then(response => {\n    if (response.errors) {\n      alert(response.errors); //   this.props.history.push(`/login`)\n    } else {\n      dispatch({\n        type: \"AUTO_LOGIN\",\n        payload: response\n      });\n    }\n  });\n};\nexport const logOut = () => {\n  return {\n    type: \"LOG_OUT\",\n    payload: null\n  };\n};","map":{"version":3,"sources":["/Users/stevenzhu/Development/code/Flatiron School Final Projects/Roomh/front_end/src/actions/index.js"],"names":["history","fetchUsers","dispatch","fetch","then","resp","json","users","type","payload","createUser","formValues","method","headers","body","JSON","stringify","username","password","email","response","errors","alert","localStorage","token","login","autoLogin","logOut"],"mappings":"AACA,OAAOA,OAAP,MAAoB,YAApB;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAMC,QAAQ,IAAI;AACxCC,EAAAA,KAAK,CAAC,4CAAD,CAAL,CACCC,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMG,KAAK,IAAI;AACXL,IAAAA,QAAQ,CAAC;AAACM,MAAAA,IAAI,EAAE,aAAP;AAAsBC,MAAAA,OAAO,EAAEF;AAA/B,KAAD,CAAR;AACH,GAJD;AAKH,CANM;AAQP,OAAO,MAAMG,UAAU,GAAIC,UAAD,IAAgBT,QAAQ,IAAI;AAClDC,EAAAA,KAAK,CAAC,8BAAD,EAAiC;AAClCS,IAAAA,MAAM,EAAE,MAD0B;AAElCC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEP,gBAAU;AAFH,KAFyB;AAMlCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,QAAQ,EAAEN,UAAU,CAACM,QADF;AAEnBC,MAAAA,QAAQ,EAAEP,UAAU,CAACO,QAFF;AAGnBC,MAAAA,KAAK,EAAER,UAAU,CAACQ;AAHC,KAAf;AAN4B,GAAjC,CAAL,CAYCf,IAZD,CAYMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAZd,EAaCF,IAbD,CAaMgB,QAAQ,IAAI;AACd,QAAIA,QAAQ,CAACC,MAAb,EAAqB;AACjBC,MAAAA,KAAK,CAACF,QAAQ,CAACC,MAAV,CAAL;AACH,KAFD,MAEO;AACHnB,MAAAA,QAAQ,CAAC;AAACM,QAAAA,IAAI,EAAE,kBAAP;AAA2BC,QAAAA,OAAO,EAAEW;AAApC,OAAD,CAAR;AACAG,MAAAA,YAAY,CAACC,KAAb,GAAqBJ,QAAQ,CAACI,KAA9B;AACH;AACJ,GApBD;AAsBH,CAvBM;AAyBP,OAAO,MAAMC,KAAK,GAAId,UAAD,IAAgBT,QAAQ,IAAI;AAC7CC,EAAAA,KAAK,CAAC,6BAAD,EAAgC;AACjCS,IAAAA,MAAM,EAAE,MADyB;AAEjCC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEP,gBAAU;AAFH,KAFwB;AAMjCC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,MAAAA,QAAQ,EAAEN,UAAU,CAACM,QADF;AAEnBC,MAAAA,QAAQ,EAAEP,UAAU,CAACO;AAFF,KAAf;AAN2B,GAAhC,CAAL,CAWKd,IAXL,CAWUC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAXlB,EAYKF,IAZL,CAYUgB,QAAQ,IAAI;AACd,QAAIA,QAAQ,CAACC,MAAb,EAAoB;AAClBC,MAAAA,KAAK,CAACF,QAAQ,CAACC,MAAV,CAAL;AACD,KAFD,MAEO;AACLnB,MAAAA,QAAQ,CAAC;AAACM,QAAAA,IAAI,EAAE,QAAP;AAAiBC,QAAAA,OAAO,EAAEW;AAA1B,OAAD,CAAR;AACAG,MAAAA,YAAY,CAACC,KAAb,GAAqBJ,QAAQ,CAACI,KAA9B;AACD;AACJ,GAnBL;AAoBH,CArBM;AAuBP,OAAO,MAAME,SAAS,GAAIF,KAAD,IAAWtB,QAAQ,IAAI;AAC5CC,EAAAA,KAAK,CAAC,kCAAD,EAAqC;AACtCU,IAAAA,OAAO,EAAE;AACP,uBAAiBW;AADV;AAD6B,GAArC,CAAL,CAKGpB,IALH,CAKQC,IAAI,IAAIA,IAAI,CAACC,IAAL,EALhB,EAMGF,IANH,CAMQgB,QAAQ,IAAI;AAChB,QAAIA,QAAQ,CAACC,MAAb,EAAoB;AAClBC,MAAAA,KAAK,CAACF,QAAQ,CAACC,MAAV,CAAL,CADkB,CAEpB;AACC,KAHD,MAGO;AACHnB,MAAAA,QAAQ,CAAC;AAACM,QAAAA,IAAI,EAAE,YAAP;AAAqBC,QAAAA,OAAO,EAAEW;AAA9B,OAAD,CAAR;AACH;AACF,GAbH;AAcH,CAfM;AAkBP,OAAO,MAAMO,MAAM,GAAG,MAAM;AACxB,SAAO;AAACnB,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,OAAO,EAAE;AAA3B,GAAP;AAEH,CAHM","sourcesContent":["\nimport history from '../history'\n\nexport const fetchUsers = () => dispatch => {\n    fetch('https://jsonplaceholder.typicode.com/users')\n    .then(resp => resp.json())\n    .then(users => {\n        dispatch({type: \"FETCH_USERS\", payload: users})\n    })\n}\n\nexport const createUser = (formValues) => dispatch => {\n    fetch('http://localhost:3000/signup', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          username: formValues.username,\n          password: formValues.password,\n          email: formValues.email\n        })\n    })\n    .then(resp => resp.json())\n    .then(response => {\n        if (response.errors) {\n            alert(response.errors)\n        } else {\n            dispatch({type: \"SET_CURRENT_USER\", payload: response})\n            localStorage.token = response.token\n        }\n    })\n    \n} \n\nexport const login = (formValues) => dispatch => {\n    fetch('http://localhost:3000/login', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          username: formValues.username,\n          password: formValues.password,\n        })\n        })\n        .then(resp => resp.json())\n        .then(response => {\n            if (response.errors){\n              alert(response.errors)\n            } else {\n              dispatch({type: \"LOG_IN\", payload: response})\n              localStorage.token = response.token\n            }\n        })\n}\n\nexport const autoLogin = (token) => dispatch => {\n    fetch(\"http://localhost:3000/auto_login\", {\n        headers: {\n          \"Authorization\": token\n        }\n      })\n      .then(resp => resp.json())\n      .then(response => {\n        if (response.errors){\n          alert(response.errors)\n        //   this.props.history.push(`/login`)\n        } else {\n            dispatch({type: \"AUTO_LOGIN\", payload: response})\n        }\n      })\n}\n\n              \nexport const logOut = () => {\n    return {type: \"LOG_OUT\", payload: null}\n    \n}"]},"metadata":{},"sourceType":"module"}